127.0.0.1 {
    # Django staticassets
    handle_path /static* {
        file_server {
            root ./backend/staticfiles
            browse
        }
    }
    
    # Django Rest API
    handle /api* {
        reverse_proxy localhost:8000
    }

    # Django FAQ 
    # This will work if we add the correct path in Django Admin
    # Think of it as 2 way verification
    handle /faq* {
        reverse_proxy localhost:8000
    }


    # Svelte app working
    handle_path /anime* {
        rewrite * /AnimeCore{uri}
        # hOW TO FIX ?
        # https://caddy.community/t/caddy-v2-single-page-app-help-example-rewrites-are-being-weird/9178/12
    }

    handle /_app* {
        file_server {
            root ./frontend/build/_app
            browse
        }
    }
    handle /fonts* {
        file_server {
            root ./frontend/build/fonts
            browse
        }
    }
    handle /icons* {
        file_server {
            root ./frontend/build/icons
            browse
        }
    }
    handle /images* {
        file_server {
            root ./frontend/build/images
            browse
        }
    }
    
}